<div class="trustpilot-compact">
  <div class="tp-container">
    
    {% if section.settings.title != blank %}
    <h2 class="tp-title">{{ section.settings.title }}</h2>
    {% endif %}
    
    <div class="tp-rating-line">
      <span class="tp-excellent">{{ section.settings.excellent_text }}</span>
      <span class="tp-score">{{ section.settings.rating }} / 5</span>
      
      <div class="tp-stars">
        <span class="tp-star">★</span>
        <span class="tp-star">★</span>
        <span class="tp-star">★</span>
        <span class="tp-star">★</span>
        <span class="tp-star">★</span>
      </div>
    </div>
    
    <div class="tp-info">
      {{ section.settings.review_prefix }}<span class="tp-count">{{ section.settings.review_count }}</span>{{ section.settings.review_suffix }} ⭐ {{ section.settings.brand_text }}
    </div>
    
  </div>
</div>

<style>
.trustpilot-compact {
  background: {{ section.settings.background_color }};
  padding: {{ section.settings.spacing }}px 20px;
}

.tp-container {
  max-width: 900px;
  margin: 0 auto;
  text-align: center;
}

.tp-title {
  font-size: {{ section.settings.title_size }}px;
  color: {{ section.settings.title_color }};
  font-weight: 600;
  margin: 0 0 {{ section.settings.title_spacing }}px 0;
  line-height: 1.2;
}

.tp-rating-line {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: {{ section.settings.element_gap }}px;
  margin-bottom: {{ section.settings.info_spacing }}px;
  flex-wrap: wrap;
}

.tp-excellent {
  font-size: {{ section.settings.text_size }}px;
  color: {{ section.settings.text_color }};
  font-weight: 500;
}

.tp-score {
  font-size: {{ section.settings.rating_size }}px;
  color: {{ section.settings.rating_color }};
  font-weight: 700;
}

.tp-stars {
  display: flex;
  gap: {{ section.settings.star_spacing }}px;
}

.tp-star {
  width: {{ section.settings.star_size }}px;
  height: {{ section.settings.star_size }}px;
  background: {{ section.settings.star_color }};
  color: white;
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: {{ section.settings.star_icon_size }}px;
  font-weight: bold;
}

.tp-info {
  font-size: {{ section.settings.info_size }}px;
  color: {{ section.settings.info_color }};
}

.tp-count {
  color: {{ section.settings.count_color }};
  font-weight: 600;
  text-decoration: underline;
}

/* Mobile */
@media (max-width: 768px) {
  .trustpilot-compact {
    padding: {{ section.settings.mobile_spacing }}px 15px;
  }
  
  .tp-title {
    font-size: {{ section.settings.mobile_title_size }}px;
  }
  
  .tp-rating-line {
    gap: {{ section.settings.mobile_gap }}px;
    {% if section.settings.mobile_stack %}
    flex-direction: column;
    {% endif %}
  }
  
  .tp-star {
    width: {{ section.settings.mobile_star_size }}px;
    height: {{ section.settings.mobile_star_size }}px;
    font-size: {{ section.settings.mobile_star_icon }}px;
  }
  
  .tp-info {
    font-size: {{ section.settings.mobile_info_size }}px;
  }
}
</style>

{% schema %}
{
  "name": "Trustpilot Compact",
  "settings": [
    {
      "type": "header",
      "content": "Contenu"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titre",
      "default": "Nos clients en parlent le mieux"
    },
    {
      "type": "text",
      "id": "excellent_text",
      "label": "Texte excellent",
      "default": "Excellent"
    },
    {
      "type": "text",
      "id": "rating",
      "label": "Note",
      "default": "4,7"
    },
    {
      "type": "text",
      "id": "review_prefix",
      "label": "Avant nombre",
      "default": "basé sur +"
    },
    {
      "type": "text",
      "id": "review_count",
      "label": "Nombre d'avis",
      "default": "1 067"
    },
    {
      "type": "text",
      "id": "review_suffix",
      "label": "Après nombre",
      "default": " avis"
    },
    {
      "type": "text",
      "id": "brand_text",
      "label": "Texte marque",
      "default": "Trustpilot"
    },
    {
      "type": "header",
      "content": "Espacements"
    },
    {
      "type": "range",
      "id": "spacing",
      "label": "Espacement général",
      "min": 10,
      "max": 50,
      "step": 5,
      "default": 15
    },
    {
      "type": "range",
      "id": "title_spacing",
      "label": "Espace sous titre",
      "min": 5,
      "max": 25,
      "step": 5,
      "default": 10
    },
    {
      "type": "range",
      "id": "element_gap",
      "label": "Espace entre éléments",
      "min": 5,
      "max": 20,
      "step": 5,
      "default": 10
    },
    {
      "type": "range",
      "id": "info_spacing",
      "label": "Espace avant info",
      "min": 5,
      "max": 15,
      "step": 5,
      "default": 5
    },
    {
      "type": "range",
      "id": "star_spacing",
      "label": "Espace entre étoiles",
      "min": 2,
      "max": 6,
      "step": 2,
      "default": 2
    },
    {
      "type": "header",
      "content": "Tailles Desktop"
    },
    {
      "type": "range",
      "id": "title_size",
      "label": "Taille titre",
      "min": 20,
      "max": 35,
      "step": 5,
      "default": 25
    },
    {
      "type": "range",
      "id": "text_size",
      "label": "Taille texte",
      "min": 14,
      "max": 20,
      "step": 2,
      "default": 16
    },
    {
      "type": "range",
      "id": "rating_size",
      "label": "Taille note",
      "min": 16,
      "max": 24,
      "step": 2,
      "default": 18
    },
    {
      "type": "range",
      "id": "info_size",
      "label": "Taille info",
      "min": 12,
      "max": 18,
      "step": 2,
      "default": 14
    },
    {
      "type": "range",
      "id": "star_size",
      "label": "Taille étoiles",
      "min": 20,
      "max": 30,
      "step": 5,
      "default": 25
    },
    {
      "type": "range",
      "id": "star_icon_size",
      "label": "Taille icône étoile",
      "min": 12,
      "max": 18,
      "step": 2,
      "default": 14
    },
    {
      "type": "header",
      "content": "Mobile"
    },
    {
      "type": "range",
      "id": "mobile_spacing",
      "label": "Espacement mobile",
      "min": 5,
      "max": 25,
      "step": 5,
      "default": 10
    },
    {
      "type": "range",
      "id": "mobile_title_size",
      "label": "Taille titre mobile",
      "min": 20,
      "max": 30,
      "step": 5,
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_star_size",
      "label": "Taille étoiles mobile",
      "min": 18,
      "max": 24,
      "step": 2,
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_star_icon",
      "label": "Icône étoiles mobile",
      "min": 10,
      "max": 16,
      "step": 2,
      "default": 12
    },
    {
      "type": "range",
      "id": "mobile_info_size",
      "label": "Taille info mobile",
      "min": 12,
      "max": 16,
      "step": 2,
      "default": 12
    },
    {
      "type": "range",
      "id": "mobile_gap",
      "label": "Espace éléments mobile",
      "min": 5,
      "max": 15,
      "step": 5,
      "default": 5
    },
    {
      "type": "checkbox",
      "id": "mobile_stack",
      "label": "Empiler sur mobile",
      "default": false
    },
    {
      "type": "header",
      "content": "Couleurs"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Arrière-plan",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Couleur titre",
      "default": "#1a202c"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Couleur texte",
      "default": "#2d3748"
    },
    {
      "type": "color",
      "id": "rating_color",
      "label": "Couleur note",
      "default": "#1a202c"
    },
    {
      "type": "color",
      "id": "star_color",
      "label": "Couleur étoiles",
      "default": "#00b67a"
    },
    {
      "type": "color",
      "id": "info_color",
      "label": "Couleur info",
      "default": "#718096"
    },
    {
      "type": "color",
      "id": "count_color",
      "label": "Couleur nombre",
      "default": "#1a202c"
    }
  ],
  "presets": [
    {
      "name": "Trustpilot Compact"
    }
  ]
}
{% endschema %}